[
  {
    "date": "2026-01-31",
    "changes": [
      "ğŸ§¹ Removed Lovable and Netlify dependencies - project now fully hosted on GitHub Pages with Firebase",
      "ğŸ”Š Fixed Freesound sound effects search - searches now pull results directly from Freesound API",
      "Added 10-minute client-side cache for sound searches to prevent rate limiting (429 errors)",
      "Sound results no longer disappear when API rate limit is hit - existing results are preserved",
      "ğŸ› Fixed map visibility/names arrays not shrinking when maps are deleted",
      "ğŸ› Fixed weak image fingerprint hash - now uses 4 sections for more reliable duplicate detection",
      "ğŸ› Fixed optimistic delete rollback using atomic state capture to prevent stale data",
      "ğŸ› Fixed broadcastDragState stale closure with useCallback wrapper"
    ]
  },
  {
    "date": "2026-01-29",
    "changes": [
      "ğŸ—ºï¸ Episode map scale now changes physical map size instead of viewport zoom",
      "At 200% scale, the map image is twice as large, making icons/effects appear relatively smaller",
      "Map scale settings sync in real-time from DM console to ShowTime view via JSON deep comparison",
      "ğŸ”§ Reduced scroll zoom sensitivity by 50% for finer control",
      "ğŸ› Fixed map persisting from previous episode when switching episodes",
      "ğŸ“Œ Ping panel now snaps below navigation pane and shifts to top when nav collapses",
      "Navigation pane hover trigger limited to left 60% of screen to avoid accidental triggers near ping panel",
      "Fixed pin button on navigation pane appearing disabled",
      "ğŸ› Fixed cross-episode state bleeding - shapes, fog, icons, and crawlers fully reset on episode switch",
      "ğŸ› Fixed cross-map state bleeding - all per-map state resets when switching maps within an episode",
      "ğŸ› Fixed scroll zoom causing buttons to disappear off-screen (now uses global window listener)",
      "Firebase listeners now clear state when no document exists for a map"
    ]
  },
  {
    "date": "2026-01-28",
    "changes": [
      "âš¡ MAJOR: Fixed real-time sync lag with Firebase batch writes, debouncing, and optimistic updates",
      "ğŸ¨ Added smooth CSS transitions for mob/crawler icons, shapes, and fog of war",
      "Shapes and fog of war changes now animate smoothly for all connected players",
      "ğŸŒ«ï¸ Fixed fog of war circle consolidation - fog no longer reappears after extensive clearing",
      "Replaced array trimming with intelligent merging algorithm that combines overlapping circles",
      "Added Gaussian blur filter for softer fog edges",
      "ğŸŒ«ï¸ Fog of war state now persists across sessions (enabled/disabled + revealed areas saved to Firebase)",
      "ğŸ” Zoom level now always defaults to 100% on page load"
    ]
  },
  {
    "date": "2026-01-27",
    "changes": [
      "ğŸ’ Inventory improvements: added weapon slot to equipment system",
      "ğŸ”§ Fixed ShowTime UI positioning and optimized drag performance"
    ]
  },
  {
    "date": "2026-01-26",
    "changes": [
      "ğŸ® ShowTime UI improvements and interaction enhancements",
      "Fixed various ShowTime UI issues"
    ]
  },
  {
    "date": "2026-01-24",
    "changes": [
      "ğŸ“¡ MAJOR: Real-time sync for DM episode/map selection to all players",
      "Players automatically see the map the DM selects without manual refresh",
      "ğŸ”§ Fixed icon scaling to maintain consistent sizes across zoom levels",
      "ğŸ¨ Expanded character profile UI with more detail",
      "ğŸ› Fixed mob icon dragging with proper cursor and event handling"
    ]
  },
  {
    "date": "2026-01-23",
    "changes": [
      "ğŸ›ï¸ Consolidated DM controls into MapToolsMenu for cleaner UI",
      "Fixed episode tab, user controls, and naming issues",
      "Fixed DM controls z-index to prevent overlap with tools panel"
    ]
  },
  {
    "date": "2026-01-22-late",
    "changes": [
      "ğŸ–±ï¸ Added cursor follower effect on ShowTime map",
      "ğŸ” Added zoom +/- button controls for map viewing",
      "Fixed ShowTimeView initialization order bug"
    ]
  },
  {
    "date": "2026-01-22",
    "changes": [
      "ğŸ“ MAJOR: Added Ping system for map communication",
      "All users can ping any location on the map to draw attention",
      "Pings appear as animated ripple effects visible to all players",
      "8 color options for pings (red, blue, green, yellow, purple, orange, cyan, pink)",
      "Pings sync in real-time via Firebase to all connected users",
      "Pings auto-fade after 2 seconds",
      "ğŸ“¦ MAJOR: Added Highlight Boxes for map annotations",
      "DM can add transparent boxes to highlight areas on the map",
      "Boxes can be moved, resized, and rotated with drag handles",
      "Adjustable box color and opacity (10%-90%)",
      "Boxes sync in real-time to all players",
      "ğŸ¨ New Map Tools Menu at top of map",
      "Ping and Box mode buttons with color picker",
      "Expandable menu for additional options",
      "ğŸŒ«ï¸ Fog of War improvements",
      "Fog is now fully opaque for players (completely hides content)",
      "Fog is semi-transparent for DM (can see what's hidden)",
      "ğŸ—ºï¸ Map Scale expanded to 5000%",
      "Scale options: 25%, 50%, 75%, 100%, 150%, 200%, 300%, 500%, 1000%, 2000%, 3000%, 5000%",
      "ğŸ“ Grid improvements",
      "Grid size fixed to 64px to match mob icon size",
      "Removed grid scale slider for consistency",
      "ğŸ‘¤ Default user selection",
      "Added 'Just a Boring PC' option for spectators",
      "Set as default selection in player selector",
      "Spectators group added to player selector",
      "ğŸ‘¥ MAJOR: Crawler Icons on Maps",
      "DM can now place crawler (player character) icons on maps",
      "Crawler icons display player avatar, level, and HP bar",
      "Crawler placements sync in real-time to all players",
      "DM can remove crawler icons with X button",
      "ğŸ® MAJOR: DM can add mobs/crawlers during ShowTime",
      "New +Crawler and +Mob buttons in Map Tools Menu",
      "DM can select from available crawlers or mobs to place",
      "Click on map to place the selected character",
      "Runtime placements are separate from episode-defined placements",
      "All placements sync in real-time"
    ]
  },
  {
    "date": "2026-01-21",
    "changes": [
      "ğŸŒ«ï¸ MAJOR: Enhanced Fog of War system",
      "Fog of War is now map-dependent - each map in an episode has its own fog settings",
      "Added separate Eraser toggle - DM can enable/disable eraser without affecting fog visibility",
      "Eraser mode shows brush size slider when active",
      "Reset button covers entire map with fog again (renamed from Clear All)",
      "ğŸ—ºï¸ Map Scale improvements",
      "Scale is now per-map - each map can have its own zoom level",
      "Scale controls moved to DM console Episodes tab only (cleaner ShowTime UI)",
      "Mob icons maintain fixed size regardless of map scale (no more tiny/huge mobs)",
      "Scale range expanded: 25% to 200%",
      "ğŸ‘¾ MAJOR: Mob icons are now map-dependent",
      "Mobs placed on a map only appear on that specific map",
      "When editing episodes, mob placements are per-map",
      "Map navigation shows correct mobs for each map",
      "ğŸ´ Fixed Mob Card visibility on ShowTime page",
      "Mob cards now render outside the map container",
      "Cards no longer affected by map scaling transform",
      "Cards appear correctly at bottom-right of screen",
      "ğŸ”§ Technical improvements",
      "Added mapId field to EpisodeMobPlacement for per-map tracking",
      "Backwards compatible - old episodes default mobs to first map",
      "Per-map settings UI in episode editor shows current map name and settings"
    ]
  },
  {
    "date": "2026-01-21-early",
    "changes": [
      "ğŸŒ«ï¸ Added Fog of War system for maps",
      "Fog of War overlay covers the entire map with semi-transparent darkness",
      "DM can reveal areas by clicking/dragging with adjustable brush size",
      "Fog of War covers mob icons on the map (mobs hidden until fog cleared)",
      "Real-time sync - revealed areas sync instantly to all players",
      "Clear All button to reset fog of war and re-hide the entire map",
      "ğŸ” Added Map Scale controls",
      "DM can zoom in/out on maps (25% to 200% scale)",
      "Scale setting syncs to all players in real-time",
      "ğŸ´ Fixed Mob Card display issues",
      "Mob cards now appear to the LEFT of the dice menu (no more overlap)",
      "Multiple mob cards stack horizontally",
      "Fixed card jumping when resizing - smooth transitions now",
      "Cards can be freely dragged anywhere on screen",
      "ğŸ“œ Updated changelog with all changes since January 12"
    ]
  },
  {
    "date": "2026-01-20",
    "changes": [
      "ğŸ¨ MAJOR: Enhanced Crawler Profile UI with equipment slot system",
      "Added equipment slot system: Head, Chest, Left Hand, Right Hand, Ring, Legs, Feet",
      "Equipment slots arranged anatomically (head on top, hands flanking chest, feet on bottom)",
      "Drag-and-drop inventory items to equipment slots to equip them",
      "Added equipment slot selector when creating/editing inventory items",
      "Expanded inventory view with toggleable item descriptions",
      "Larger inventory items with better spacing and readability",
      "Item tooltips showing full names on hover",
      "Fixed inventory Firebase persistence - items now save correctly using document IDs",
      "Added inline inventory management on crawler profile page",
      "ğŸ”§ Fixed Freesound API rate limiting by creating Firebase Cloud Function proxy",
      "Disabled direct Freesound API calls from client to prevent token exposure",
      "Added 1-hour caching to reduce API calls",
      "Falls back to local sound filtering when proxy unavailable",
      "ğŸ–¼ï¸ Improved avatar upload with image resizing and 500KB limit",
      "Fixed Firestore write stream exhaustion on avatar upload",
      "Added custom map names display in Episodes tab"
    ]
  },
  {
    "date": "2026-01-19",
    "changes": [
      "ğŸ® Real-time mob dragging synchronization in ShowTime",
      "Mob icons follow cursor smoothly during drag operations",
      "Throttled Firestore broadcasts to prevent rate limiting",
      "Mob positions sync instantly across all connected players",
      "Prevented mob icons from being dragged outside map boundaries",
      "Moved DM controls above the map for better visibility",
      "Made map unselectable on showtime screen",
      "ğŸ”Š Sound Effects improvements: enhanced search bar and stop button",
      "Stop button immediately halts sound playback",
      "Simplified search bar styling"
    ]
  },
  {
    "date": "2026-01-14",
    "changes": [
      "Fixed map upload and display issues",
      "Fixed DungeonAIView: Rebuilt component with proper state management",
      "Simplified Episodes tab with unified create/edit form",
      "Fixed critical bug: app stuck on loading when Firebase unavailable",
      "Fixed critical TypeScript lint errors"
    ]
  },
  {
    "date": "2026-01-13",
    "changes": [
      "ğŸ¨ MAJOR: Enhanced Episode system with visual mob placement and map management",
      "Added visual drag-and-drop mob placement editor: DMs can now drag mob icons directly onto maps to position them",
      "Created MobIcon component: circular mob tokens with head-centered positioning and HP indicators",
      "Created MapMobPlacementEditor component: full visual editor with available/placed mob management",
      "Added grid overlay system: DMs can toggle a semi-transparent grid on maps (both in Episode Editor and ShowTime)",
      "Map naming feature: DMs can now name and edit map labels in the Map Manager for better organization",
      "ShowTime improvements: DMs can toggle grid overlay while presenting episodes to players",
      "Grid overlay helps DMs with precise mob positioning and provides visual reference for gameplay",
      "Improved UI/UX: all controls are intuitive with clear visual feedback and minimal learning curve",
      "Created GridOverlay SVG component for smooth, scalable grid rendering",
      "Enhanced MapsView with inline editing for map names (click edit icon, type name, save with checkmark)"
    ]
  },
  {
    "date": "2026-01-12",
    "changes": [
      "ğŸ¬ MAJOR: Added Episode system for D&D session management",
      "Episodes feature: DMs can now create named episodes with descriptions, predefined maps, and positioned mobs",
      "Episode Creator in Dungeon AI console: intuitive form to create episodes with map selection (checkboxes) and mob positioning (0-100% X/Y sliders)",
      "ShowTime view redesigned to support Episodes: DMs select an episode, then choose which map to display and which mobs to show",
      "Real-time mob placement on maps using percentage-based coordinates (0-100%) for flexible scaling",
      "Created ResizableMobDisplay component: draggable, resizable mob tokens with expandable details panel",
      "Mob display features: compact mode (bottom-right corner) and expanded mode (full details with stats, weaknesses, strengths)",
      "Episodes support multiple maps per session and multiple mobs with independent positioning",
      "Added full Episode CRUD operations to useGameState hook with timestamps",
      "Episodes automatically sync across all players in real-time via Firebase",
      "Added 'episodes' collection type to Firebase Firestore persistence"
    ]
  },
  {
    "date": "2026-01-11",
    "changes": [
      "Hardened Firebase mob persistence: strip undefined fields, diff adds/updates/deletes, and raise image size guard",
      "Added client-side mob image resize/compress with oversize protection to prevent Firestore rejects",
      "Fixed Dungeon AI console render break by aliasing lucide Image icon",
      "Documented end-to-end Firebase persistence testing steps (FIREBASE_PERSISTENCE_TEST.md)",
      "Added scripts for Firebase CRUD smoke tests and deployment diagnostics"
    ]
  },
  {
    "date": "2026-01-10",
    "changes": [
      "ğŸ”¥ MAJOR: Migrated from file-based storage to Firebase Firestore for cloud persistence and real-time multiplayer",
      "Added real-time synchronization - changes instantly sync across all players in the same room",
      "Implemented room-based multiplayer system with invite links and room codes",
      "Created RoomManager component for creating, joining, and leaving multiplayer rooms",
      "Added Firebase configuration with environment variable support",
      "Created comprehensive Firebase setup guide (docs/FIREBASE_SETUP.md)",
      "Added data migration script (scripts/migrate-to-firebase.js) to transfer existing data to Firestore",
      "Removed dependency on backend server - app now runs on any static host (GitHub Pages, Netlify, Vercel)",
      "Implemented universal data persistence system - all user-created data (crawlers, mobs, maps, inventory) automatically saves",
      "Fixed server API endpoints that were incorrectly nested, making game data loading/saving functional",
      "Fixed CORS issues by configuring Vite proxy for seamless API communication",
      "Created generic DataStore hook (useDataStore/useFirebaseStore) that automatically persists any data type",
      "Added GameContext provider for global data access throughout the app",
      "Increased server payload limit to 50MB to support large map images",
      "Optimized localStorage to exclude large data (maps) and prevent quota errors",
      "Added comprehensive documentation (DATA_PERSISTENCE.md) with usage examples and best practices",
      "Added GitHub Copilot instructions file to guide AI assistants in using correct data patterns",
      "Added TypeScript types for collection names with autocomplete support",
      "Enhanced logging system with detailed [FirebaseStore] console messages for debugging",
      "Made data persistence extensible - new data types (quests, NPCs, spells, etc.) can be added with zero configuration"
    ]
  },
  {
    "date": "2026-01-09",
    "changes": [
      "Fixed Dungeon AI login persistence across navigations (localStorage + in-memory state)",
      "When logged into the Dungeon AI, the main crawler field now switches to the Dungeon AI profile (and restores previous player on logout)",
      "Dice Roller: controls are pinned and visible when panel is expanded (no more hidden button controls)",
      "DM page: allow content to wrap and resize so controls (Hide / Trash) remain visible on narrow windows",
      "Dice Roller: moved roll history to the top; panel now grows up to the top of the viewport and becomes scrollable when full",
      "Dice Roller: grouped multi-dice rolls into collapsible entries showing per-die results and a roll total",
      "Added new Sound Effects system: searchable library (Freesound API integration via server proxy), recent and favorites boxes, upload support, and server-backed broadcast for site-wide playback",
      "Added server proxy endpoint `/api/sounds/search` with caching and basic rate limiting",
      "Fixed Dungeon AI page layout and overflow issues so boxes no longer extend past the main container",
      "Made active navigation buttons' borders thicker to better indicate current page",
      "When signed in as Dungeon AI, the top-right player field now displays 'DUNGEON AI'",
      "Persist Dungeon AI login in browser (localStorage) and added a LOGOUT button on the main menu",
      "Dice Roller: added full roll history with crawler name identification and expanded history capacity",
      "Crawler name now displays on the Main Menu's top-left corner",
      "Added Show Time and Sound Effects buttons to the Main Menu and adjusted the grid layout"
    ]
  },
  {
    "date": "2026-01-08",
    "changes": [
      "Added player selection dropdown on splash screen (includes all crawlers, Dungeon AI, and NPC option)",
      "Added player identity display in top left corner of main page",
      "Made dice roller configurable - can now add multiple dice before rolling",
      "Added 'Show Time' button that navigates to a dedicated presentation page",
      "Added ability for admin to populate maps on Show Time page",
      "Added map visibility controls for admin (show/hide from other crawlers)",
      "Added Sound Effects button on main page",
      "Created Sound Effects page with searchable sound library",
      "Implemented real-time sound effect playback for all connected users",
      "Added changelog system with date-stamped records",
      "Added changelog button on main page",
      "Made changelog closeable with X button in top right corner"
    ]
  }
]
